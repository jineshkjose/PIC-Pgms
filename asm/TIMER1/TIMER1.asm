INCLUDE <P16F877.INC>


ORG 0X00
GOTO MAIN
ORG 0X04
GOTO INTRPT

MAIN:
	BANKSEL T1CON
	MOVLW 0X00
	MOVWF T1CON
	BANKSEL TRISD
	CLRF TRISD
	BANKSEL PORTD
	CLRF PORTD

	BANKSEL TMR1L
	MOVLW 0X3C
	MOVWF TMR1L
	BANKSEL TMR1H
	MOVLW 0XF6
	MOVWF TMR1H

	BANKSEL PIR1
	BCF PIR1,TMR1IF
	BANKSEL PIE1
	BSF PIE1,TMR1IE
	BSF INTCON,PEIE
	BSF INTCON,GIE
	BANKSEL T1CON
	BSF T1CON,TMR1ON

HERE:
	GOTO HERE

INTRPT:
	BANKSEL PIR1
	BTFSS PIR1,TMR1IF
	RETFIE
	BCF PIR1,TMR1IF
	BANKSEL PORTD
	COMF PORTD,1

	BANKSEL TMR1L
	MOVLW 0X3C
	MOVWF TMR1L
	BANKSEL TMR1H
	MOVLW 0XF6
	MOVWF TMR1H

	RETFIE
	END

